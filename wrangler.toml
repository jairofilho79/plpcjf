name = "louvores-worker"
main = "worker/index.js"
compatibility_date = "2024-01-01"

# Configuração de ambientes
[env.production]
# Rotas para interceptar PDFs e manifest
routes = [
  { pattern = "plpcjf.org/assets/*.pdf", custom_domain = true },
  { pattern = "plpcjf.org/louvores-manifest.json", custom_domain = true },
  { pattern = "plpcjf.org/api/*", custom_domain = true }
]

[[env.production.r2_buckets]]
binding = "LOUVORES_BUCKET"
bucket_name = "pls-louvores"

# JWT_SECRET será configurado via wrangler secret (NÃO coloque aqui!)
# Use: wrangler secret put JWT_SECRET --env production

